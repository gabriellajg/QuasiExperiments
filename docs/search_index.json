[["psm-matching-strategy.html", "Chapter 5 PSM Matching Strategy 5.1 Data 5.2 PSM Steps", " Chapter 5 PSM Matching Strategy library(Matching) library(MatchIt) library(optmatch) library(weights) library(cem) library(tcltk2) 5.1 Data data(lalonde) dim(lalonde) ## [1] 614 9 names(lalonde) ## [1] &quot;treat&quot; &quot;age&quot; &quot;educ&quot; &quot;race&quot; &quot;married&quot; &quot;nodegree&quot; &quot;re74&quot; ## [8] &quot;re75&quot; &quot;re78&quot; 5.1.1 Create dummy variable for race lalonde$black = ifelse(lalonde$race==&#39;black&#39;, 1, 0) lalonde$hispan = ifelse(lalonde$race==&#39;hispan&#39;, 1, 0) 5.2 PSM Steps 5.2.1 Selection of covariates in X fm1 = treat ~ age + educ + black + hispan + married + I(re74/1000) + I(re75/1000) fm2 = treat ~ age + I(age^2) + I(age^3) + educ + black + hispan + married + I(re74/1000) + I(re75/1000) fm3 = treat ~ age + I(age^2) + I(age^3) + educ + I(educ^2) + black + hispan + married + I(re74/1000) + I(re75/1000) 5.2.2 Calculation of propensity scores (p-scores) pscore &lt;- glm(fm1, data = lalonde, family = &#39;binomial&#39;) head(pscore$fitted.values) ## NSW1 NSW2 NSW3 NSW4 NSW5 NSW6 ## 0.5595934 0.2074437 0.7424791 0.7218247 0.6931278 0.6801861 hist(pscore$fitted.values[lalonde$treat==0],xlim=c(0,1)) hist(pscore$fitted.values[lalonde$treat==1],xlim=c(0,1)) lalonde$pscore = pscore$fitted.values try other formulas? 5.2.3 Matching based on p-sores all in one function matchit() set.seed(42) m.out &lt;- matchit(data = lalonde, formula = fm1, distance = &quot;logit&quot;, method = &quot;nearest&quot;, replace = TRUE, caliper = 0.2, discard = &#39;both&#39; ) m.out$match.matrix m.out$distance plot(m.out\\(distance, m.out\\)fitted.values) # same method: exact, subclass, optimal, full, cem distance: pscore plot(m.out, type = “qq”, interactive=FALSE) plot(summary(m.out)) Balance for formula 2: set.seed(42) m.out &lt;- matchit(data = lalonde, formula = fm2, distance = &quot;logit&quot;, method = &quot;nearest&quot;, replace = TRUE, caliper = 0.2, discard = &#39;both&#39; ) plot(summary(m.out)) Balance for formula 3: set.seed(42) m.out &lt;- matchit(data = lalonde, formula = fm3, distance = &quot;logit&quot;, method = &quot;nearest&quot;, replace = TRUE, caliper = 0.2, discard = &#39;both&#39; ) plot(summary(m.out)) matchit: https://kosukeimai.github.io/MatchIt/articles/MatchIt.html manual: https://imai.fas.harvard.edu/research/files/matchit.pdf starting from page 15 Let’s play with the arguments! "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
